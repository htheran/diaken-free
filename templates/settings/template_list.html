{% extends 'base/base.html' %}
{% block title %}Ansible Templates{% endblock %}
{% block content %}
<div class="container-fluid">
  <div class="card">
    <div class="card-header">
      <h3 class="card-title"><i class="fas fa-file-code"></i> Ansible Templates</h3>
      <div class="card-tools">
        <a href="{% url 'template_upload' %}" class="btn btn-primary btn-sm">
          <i class="fas fa-upload"></i> Upload Template
        </a>
      </div>
    </div>
    <div class="card-body p-0">
      <div class="list-group list-group-flush">
        {% for template in templates %}
        <div class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <h5 class="mb-1">
              {% if template.template_type == 'host' %}
                <i class="fas fa-server text-info"></i>
              {% else %}
                <i class="fas fa-users text-success"></i>
              {% endif %}
              {{ template.name }}
              <span class="badge badge-secondary">{{ template.template_type|title }}</span>
            </h5>
            {% if template.description %}
              <p class="mb-1 text-muted">{{ template.description }}</p>
            {% endif %}
            <small class="text-muted">
              <i class="far fa-calendar"></i> Created: {{ template.created_at|date:"d/m/Y H:i" }}
              {% if template.file %}
                | <i class="fas fa-file"></i> {{ template.file.name }}
              {% endif %}
            </small>
          </div>
          <div>
            <a href="{% url 'template_edit' template.pk %}" class="btn btn-sm btn-warning" title="Edit">
              <i class="fas fa-edit"></i> Edit
            </a>
            <form method="post" action="{% url 'template_delete' template.pk %}" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this template?');">
              {% csrf_token %}
              <button type="submit" class="btn btn-sm btn-danger" title="Delete">
                <i class="fas fa-trash"></i> Delete
              </button>
            </form>
          </div>
        </div>
        {% empty %}
        <div class="list-group-item text-center text-muted">
          <p class="mb-0">No templates found</p>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
